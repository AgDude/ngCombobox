/*! ngCombobox v2.0.1, License: MIT, Generated at 2014-06-26 12:17:51 -0500 */!function(){"use strict";function a(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,c){return angular.forEach(a[b],function(a){a.call(null,c)}),this}}}function b(a,b){return a=a||[],a.length>0&&!angular.isObject(a[0])&&a.forEach(function(c,d){a[d]={},a[d][b]=c}),a}function c(a,b,c){for(var d=null,e=0;e<a.length;e++)if(a[e][c].toLowerCase()===b[c].toLowerCase()){d=a[e];break}return d}function d(a,b,c){var d=b.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return a.replace(new RegExp(d,"gi"),c)}var e={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,comma:188,period:190,dot:110},f=angular.module("ngTagsInput",[]);f.directive("tagsInput",["$timeout","$document","tagsInputConfig",function(d,f,g){function h(a,b){var d,e,f,g={};return d=function(b){return b[a.displayProperty]},e=function(b,c){b[a.displayProperty]=c},f=function(b){var e=d(b);return e.length>=a.minLength&&e.length<=(a.maxLength||e.length)&&a.allowedTagsPattern.test(e)&&!c(g.items,b,a.displayProperty)},g.items=[],g.addText=function(a){var b={};return e(b,a),g.add(b)},g.add=function(c){var h=d(c).trim();return a.replaceSpacesWithDashes&&(h=h.replace(/\s/g,"-")),e(c,h),f(c)?(g.items.push(c),b.trigger("tag-added",{$tag:c})):b.trigger("invalid-tag",{$tag:c}),c},g.remove=function(a){var c=g.items.splice(a,1)[0];return b.trigger("tag-removed",{$tag:c}),c},g.removeLast=function(){var b,c=g.items.length-1;return a.enableEditingLastTag||g.selected?(g.selected=null,b=g.remove(c)):g.selected||(g.selected=g.items[c]),b},g}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdded:"&",onTagRemoved:"&",source:"=?"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(b,c,d){g.load("tagsInput",b,c,{placeholder:[String,""],tabindex:[Number],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,2],maxLength:[Number],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!0],addOnComma:[Boolean,!0],addOnPeriod:[Boolean,!0],addOnBlur:[Boolean,!0],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number],maxTags:[Number],displayProperty:[String,"text"],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!0],showAll:[Boolean,!0],debounceDelay:[Number,100],minSearchLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10]}),b.events=new a,b.tagList=new h(b.options,b.events),this.registerAutocomplete=function(a){b.toggleSuggestionList=a;var c=d.find("input");return c.on("keydown",function(a){b.events.trigger("input-keydown",a)}),{addTag:function(a){return b.tagList.add(a)},focusInput:function(){c[0].focus()},getTags:function(){return b.tags},getOptions:function(){return b.options},on:function(a,c){return b.events.on(a,c),this}}}}],link:{post:function(a,c,g,h){var i=[e.enter,e.comma,e.space,e.backspace,e.period,e.dot],j=a.tagList,k=a.events,l=a.options,m=c.find("input"),n=c.find("option");if(n.length>0){var o=[],p=[];h.$isEmpty()||(o=h.$viewValue),angular.forEach(n,function(a){var b={value:a.value,text:a.label};p.push(b),a.selected&&o.push(b),angular.element(a).remove()}),a.source=p,h.$setViewValue(o)}k.on("tag-added",a.onTagAdded).on("tag-removed",a.onTagRemoved).on("tag-added",function(){a.newTag.text=""}).on("tag-added tag-removed",function(){h.$setViewValue(a.tags)}).on("invalid-tag",function(){a.newTag.invalid=!0}).on("input-change",function(){j.selected=null,a.newTag.invalid=null}).on("input-focus",function(){h.$setValidity("leftoverText",!0)}).on("input-blur",function(){l.addFromAutocompleteOnly||(l.addOnBlur&&j.addText(a.newTag.text),h.$setValidity("leftoverText",l.allowLeftoverText?!0:!a.newTag.text))}),a.newTag={text:"",invalid:null,readonly:!1},a.getDisplayText=function(a){return a[l.displayProperty].trim()},a.track=function(a){return a[l.displayProperty]},a.newTagChange=function(){k.trigger("input-change",a.newTag.text)},a.$watch("tags",function(c){a.tags=b(c,l.displayProperty),j.items=a.tags}),a.$watch("tags.length",function(b){a.newTag.readonly=b>=l.maxTags,h.$setValidity("maxTags",angular.isUndefined(l.maxTags)||b<=l.maxTags),h.$setValidity("minTags",angular.isUndefined(l.minTags)||b>=l.minTags)});var q={};q[e.enter]=l.addOnEnter,q[e.comma]=l.addOnComma,q[e.space]=l.addOnSpace,q[e.period]=l.addOnPeriod,q[e.dot]=l.addOnPeriod,a.addKeys=q,m.on("keydown",function(b){if(!b.isImmediatePropagationStopped||!b.isImmediatePropagationStopped()){var c,f,g,h=b.keyCode,k=b.shiftKey||b.altKey||b.ctrlKey||b.metaKey;if(!k&&-1!==i.indexOf(h))if(c=!l.addFromAutocompleteOnly&&q[h],f=!c&&h===e.backspace&&0===a.newTag.text.length,g=l.addFromAutocompleteOnly&&a.newTag.invalid&&q[h],c)j.addText(a.newTag.text),a.$apply(),b.preventDefault();else if(f){var m=j.removeLast();m&&l.enableEditingLastTag&&(a.newTag.text=m[l.displayProperty]),a.$apply(),b.preventDefault()}else g&&(a.newTag.text="Invalid Entry...",a.newTag.readonly=!0,a.$apply(),d(function(){a.newTag.text="",a.newTag.readonly=!1},2e3))}}).on("focus",function(){a.hasFocus||(a.hasFocus=!0,k.trigger("input-focus"),a.$apply())}).on("blur",function(){d(function(){var b=f.prop("activeElement"),d=b===m[0],e=c[0].contains(b);(d||!e)&&(a.hasFocus=!1,k.trigger("input-blur"))})}),c.find("div").on("click",function(){m[0].focus()})}}}}]),f.directive("autoComplete",["$document","$timeout","$sce","tagsInputConfig","$q","grep",function(a,f,g,h,i,j){function k(a,d){var e,g,h,i={};return g=function(a,b){return a.filter(function(a){return!c(b,a,d.tagsInput.displayProperty)})},i.reset=function(){h=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null,f.cancel(e)},i.show=function(){i.selected=null,i.visible=!0,i.select(0)},i.load=function(c,j){return c.length<d.minLength?void i.reset():(f.cancel(e),void(e=f(function(){i.query=c;var e=a({$query:c});h=e,e.then(function(a){e===h&&(a=b(a.data||a,d.tagsInput.displayProperty),a=g(a,j),i.items=a.slice(0,d.maxResultsToShow),i.items.length>0?i.show():i.reset())})},d.debounceDelay,!1)))},i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a]},i.reset(),i}function l(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return{restrict:"E",require:"^tagsInput",templateUrl:"ngTagsInput/auto-complete.html",scope:!0,link:function(b,c,f,m){function n(a){var c=a.$query,d=new RegExp(c,"i"),e=i.defer(),f=j(b.source,function(a){return d.test(a.text)});return f.sort(function(a,b){return 0===a.text.indexOf(c)||0===b.text.indexOf(c)?a.text.indexOf(c)-b.text.indexOf(c):0}),e.resolve(f),e.promise}var o,p,q,r,s,t,u=[e.enter,e.tab,e.escape,e.up,e.down,e.dot,e.period,e.space,e.comma];h.load("autoComplete",b,f,{debounceDelay:[Number,100],minSearchLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10]}),q=b.options;var v=function(){o.visible?o.reset():o.load(b.newTag.text,p.getTags())};p=m.registerAutocomplete(v),q.tagsInput=p.getOptions(),t="function"==typeof b.source?b.source:n,o=new k(t,q),r=function(a){return a[q.tagsInput.displayProperty]},b.suggestionList=o,b.addSuggestion=function(){var a=!1;return b.tags.length>=b.options.tagsInput.maxTags&&b.tags.pop(),o.selected&&(p.addTag(o.selected),o.reset(),p.focusInput(),a=!0),a},b.highlight=function(a){var b=r(a);return b=l(b),q.highlightMatchedText&&(b=d(b,l(o.query),"<em>$&</em>")),g.trustAsHtml(b)},b.track=function(a){return r(a)},p.on("tag-added invalid-tag",function(){o.reset()}).on("input-change",function(a){a?o.load(a,p.getTags()):o.reset()}).on("input-keydown",function(a){var c,d;if(-1!==u.indexOf(a.keyCode)){var f=!1;a.stopImmediatePropagation=function(){f=!0,a.stopPropagation()},a.isImmediatePropagationStopped=function(){return f},o.visible&&(c=a.keyCode,d=!1,c===e.down?(o.selectNext(),d=!0):c===e.up?(o.selectPrior(),d=!0):c===e.escape?(o.reset(),d=!0):b.addKeys[c]&&(d=b.addSuggestion()),d&&(a.preventDefault(),a.stopImmediatePropagation(),b.$apply()))}}).on("input-blur",function(){o.reset()}),s=function(){o.visible&&(o.reset(),b.$apply())},a.on("click",s),b.$on("$destroy",function(){a.off("click",s)})}}}]).factory("grep",function(){return function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e}}),f.directive("tiTranscludePrepend",function(){return function(a,b,c,d,e){e(function(a){b.prepend(a)})}}),f.directive("tiAutosize",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f,g=3;e=angular.element('<span class="input"></span>'),e.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),b.parent().append(e),f=function(a){var d,f=a;return angular.isString(f)&&0===f.length&&(f=c.placeholder),f&&(e.text(f),e.css("display",""),d=e.prop("offsetWidth"),e.css("display","none")),b.css("width",d?d+g+"px":""),a},d.$parsers.unshift(f),d.$formatters.unshift(f),c.$observe("placeholder",function(a){d.$modelValue||f(a)})}}}),f.provider("tagsInputConfig",function(){var a={},b={};this.setDefaults=function(b,c){return a[b]=c,this},this.setActiveInterpolation=function(a,c){return b[a]=c,this},this.$get=["$interpolate",function(c){var d={};return d[String]=function(a){return a},d[Number]=function(a){return parseInt(a,10)},d[Boolean]=function(a){return"true"===a.toLowerCase()},d[RegExp]=function(a){return new RegExp(a)},{load:function(e,f,g,h){f.options={},angular.forEach(h,function(h,i){var j,k,l,m,n;j=h[0],k=h[1],l=d[j],m=function(){var b=a[e]&&a[e][i];return angular.isDefined(b)?b:k},n=function(a){f.options[i]=a?l(a):m()},b[e]&&b[e][i]?g.$observe(i,function(a){n(a)}):n(g[i]&&c(g[i])(f.$parent))})}}}]}),f.run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="host" ng-class="{\'input-group\': options.showAll && source}" tabindex="-1" ti-transclude-prepend=""><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by $id(tag)" ng-class="{ selected: tag == tagList.selected }"><span>{{getDisplayText(tag)}}</span> <a class="remove-button" ng-click="tagList.remove($index)">{{options.removeTagSymbol}}</a></li></ul><input class="input" placeholder="{{options.placeholder}}" tabindex="{{options.tabindex}}" ng-model="newTag.text" ng-readonly="newTag.readonly" ng-change="newTagChange()" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ti-autosize=""></div><auto-complete debounce-delay="{{options.debounceDelay}}" min-search-length="{{options.minSearchLength}}" highlight-matched-text="{{options.highlightMatchedText}}" maxresults-to-show="{{options.maxResultsToShow}}"></auto-complete><span class="input-group-addon" ng-if="options.showAll" ng-click="toggleSuggestionList();"><span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"><span class="ui-button-text" style="padding: 0px">&nbsp;</span></span></span></div>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-show="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by $id(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestion()" ng-mouseenter="suggestionList.select($index)" ng-bind-html="highlight(item)"></li></ul></div>')}])}();